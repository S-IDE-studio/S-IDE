/**
 * dockview-theme-side
 *
 * Custom dockview theme for S-IDE (Side Studio IDE)
 * Monochrome Black theme - uses theme.css for all colors
 *
 * Theme class: dockview-theme-side
 *
 * Note: theme.css is imported in styles.css before this file
 */

@import "dockview/dist/styles/dockview.css";

/* ========================================
   S-IDE Custom dockview Theme
   ======================================== */

/* Override abyss theme colors to monochrome */
.dockview-theme-abyss,
.dockview-theme-abyss-spaced {
  --dv-color-abyss-accent: #333333;
  --dv-color-abyss-accent-hover: var(--color-accent-hover, rgba(255, 255, 255, 0.15));
  --dv-color-abyss-background: var(--color-bg, #000000);
  --dv-color-abyss-background2: var(--color-bg-soft, #0a0a0a);
  --dv-color-abyss-foreground: var(--color-fg, #ffffff);
  --dv-color-abyss-border: var(--color-border-active, #ffffff);
  --dv-color-abyss-secondary: var(--color-bg-tertiary, #141414);
  --dv-color-abyss-lighter: #333333;
  --dv-color-abyss-light: var(--color-bg-soft, #0a0a0a);
  --dv-color-abyss-dark: var(--color-bg, #000000);
  --dv-color-abyss-primary-text: var(--color-fg, #ffffff);
  --dv-color-abyss-secondary-text: var(--color-fg-dim, #888888);
}

/* Override active sash color from abyss accent */
.dockview-theme-abyss .dv-sash::after,
.dockview-theme-abyss-spaced .dv-sash::after {
  background-color: var(--color-accent, #ffffff);
}

.dockview-theme-side {
  /* Tauri: Disable window drag in dockview area */
  -webkit-app-region: no-drag;

  /* ========================================
     Dockview Theme Colors (from theme.css)
     ======================================== */

  /* Override abyss theme colors to monochrome */
  --dv-color-abyss-accent: var(--color-accent);
  --dv-color-abyss-accent-hover: var(--color-accent-hover);

  /* Base backgrounds */
  --dv-group-view-background-color: var(--color-bg, #000000);
  --dv-tabs-and-actions-container-background-color: var(--color-bg-soft, #0a0a0a);

  /* Active group - visible panel */
  --dv-activegroup-visiblepanel-tab-background-color: var(--color-bg, #000000);
  --dv-activegroup-visiblepanel-tab-color: var(--color-fg, #ffffff);

  /* Active group - hidden panel */
  --dv-activegroup-hiddenpanel-tab-background-color: var(--color-bg-tertiary, #141414);
  --dv-activegroup-hiddenpanel-tab-color: var(--color-fg-dim, #888888);

  /* Inactive group - visible panel */
  --dv-inactivegroup-visiblepanel-tab-background-color: var(--color-bg, #000000);
  --dv-inactivegroup-visiblepanel-tab-color: var(--color-fg-dim, #888888);

  /* Inactive group - hidden panel */
  --dv-inactivegroup-hiddenpanel-tab-background-color: var(--color-bg-soft, #0a0a0a);
  --dv-inactivegroup-hiddenpanel-tab-color: var(--color-muted, #666666);

  /* Dividers and borders */
  --dv-tab-divider-color: var(--border, transparent);
  --dv-separator-border: var(--border-active, #ffffff);
  --dv-paneview-header-border-color: rgba(255, 255, 255, 0.1);

  /* Interactive elements */
  --dv-icon-hover-background-color: var(--color-hover, rgba(255, 255, 255, 0.1));
  --dv-drag-over-background-color: rgba(255, 255, 255, 0.08);
  --dv-drag-over-border-color: var(--color-accent-dim, #666666);

  /* Sash (resize handle) */
  --dv-sash-color: transparent;
  --dv-active-sash-color: var(--color-accent, #ffffff);
  --dv-active-sash-transition-duration: 0.1s;
  --dv-active-sash-transition-delay: 0.5s;

  /* Scrollbar */
  --dv-tabs-container-scrollbar-color: var(--color-muted, #666666);
  --dv-scrollbar-background-color: rgba(255, 255, 255, 0.25);

  /* Focus and active states */
  --dv-paneview-active-outline-color: var(--color-accent-dim, #666666);

  /* ========================================
     Layout & Typography
     ======================================== */

  --dv-tabs-and-actions-container-font-size: 13px;
  --dv-tabs-and-actions-container-height: 35px;
  --dv-tab-font-size: inherit;
  --dv-tab-margin: 0;
  --dv-border-radius: 0px;

  /* Floating panels */
  --dv-floating-box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);

  /* Overlay z-index */
  --dv-overlay-z-index: 999;
}

/* ========================================
     Drag & Drop States
     ======================================== */

/* Subtle drop target indication for tab dragging */
.dockview-theme-side .dv-drop-target-container
  .dv-drop-target-anchor.dv-drop-target-anchor-container-changed {
  background-color: rgba(0, 0, 0, 0.05);
  border-bottom: 2px solid var(--color-accent);
}

/* ========================================
     Tab Styling
     ======================================== */

/* Base tab styles */
.dockview-theme-side .dv-tab {
  -webkit-app-region: no-drag;
  pointer-events: auto;
  background-color: var(--color-bg);
  color: var(--color-fg);
  height: 35px;
  padding: 0;
  border-radius: var(--dv-border-radius, 0px);
  border-top: 0;
  position: relative;
  transition: background-color 0.15s ease;
}

/* Active tab with top border */
.dockview-theme-side .dv-tab.active,
.dockview-theme-side .dv-tab.dv-active-tab {
  background-color: var(--color-bg);
  color: var(--color-fg);
  opacity: 1;
  border-top: 1px solid var(--color-accent, #ffffff);
}

/* When hovering close button on active tab - NO border */
.dockview-theme-side .dv-tab.active .panel-tab-close:hover,
.dockview-theme-side .dv-tab.dv-active-tab .panel-tab-close:hover {
  border-top: 0;
}

/* Inactive tab - no border */
.dockview-theme-side .dv-tab:not(.active):not(.dv-active-tab) {
  border-top: 0;
}

/* Tab close button */
.dockview-theme-side .dv-tab .panel-tab-close {
  opacity: 1;
}

.dockview-theme-side .dv-tab .panel-tab-close:hover {
  background-color: var(--color-list-hover);
}

/* ========================================
     Tab Content Elements
     ======================================== */

/* Tab icon */
.dockview-theme-side .dv-tab .panel-tab-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  width: 16px;
  height: 16px;
  color: var(--color-fg);
}

/* Tab title */
.dockview-theme-side .dv-tab .panel-tab-title {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  min-width: 0;
  color: var(--color-fg);
  font-size: 12px;
}

/* Tab pin icon */
.dockview-theme-side .dv-tab .tab-pin-icon {
  opacity: 0.6;
}

/* Tab dirty indicator */
.dockview-theme-side .dv-tab .panel-tab-dirty-indicator {
  color: var(--color-fg-dim);
  font-size: 10px;
  margin-left: 4px;
  flex-shrink: 0;
}

/* Tabs container */
.dockview-theme-side .dv-tabs-container,
.dockview-theme-side .dv-tabs-and-actions-container {
  -webkit-app-region: no-drag;
  background-color: var(--color-bg-soft);
}

/* ========================================
     Panel Content Area
     ======================================== */

/* Panel content area styling */
.dockview-theme-side .dv-react-part {
  background-color: var(--color-bg);
  color: var(--color-fg);
  overflow: auto;
  min-height: 0;
  flex: 1;
}

/* Ensure panel content fills container */
.dockview-theme-side .dv-react-part-container {
  background-color: var(--color-bg);
  display: flex;
  flex-direction: column;
  width: 100%;
  min-height: 0;
  flex: 1;
  overflow: hidden;
}

/* Add padding to panel contents */
.dockview-theme-side .server-settings-panel,
.dockview-theme-side .setup-panel,
.dockview-theme-side .agent-panel,
.dockview-theme-side .workspace-panel,
.dockview-theme-side .deck-panel {
  padding: 20px;
  width: 100%;
  height: 100%;
  overflow: auto;
  box-sizing: border-box;
}

/* ========================================
     Separator (Hidden)
     ======================================== */

/* Hide separator completely */
.dockview-theme-side .dv-separator {
  display: none;
}

.dockview-theme-side.dv-separator-border .dv-view:not(:first-child)::before {
  display: none;
}

/* ========================================
     Sash (Resize Handle)
     ======================================== */

/* All sash states */
.dockview-theme-side .dv-sash {
  background: transparent;
}

.dockview-theme-side .dv-sash::after {
  background-color: transparent;
}

.dockview-theme-side .dv-sash:hover,
.dockview-theme-side .dv-sash:active {
  background: var(--color-accent);
}

.dockview-theme-side .dv-sash:hover::after,
.dockview-theme-side .dv-sash:active::after {
  background-color: var(--color-accent);
}

/* Sash drag overlay */
.dockview-theme-side .dv-sash-drag-overlay {
  background: rgba(255, 255, 255, 0.05);
}
